group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total"))
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4))
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgn(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Asia, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
layout(xaxis = list(title = "Number of Days after first Confirmated Case"),
yaxis = list(title = "Number of Cases"),
title = "Evolution of Confirmed Cases after the first Confirmed Case")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgn(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
layout(xaxis = list(title = "Number of Days after first Confirmated Case"),
yaxis = list(title = "Number of Cases"),
title = "Evolution of Confirmed Cases after the first Confirmed Case")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgnb222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
layout(xaxis = list(title = "Number of Days after first Confirmated Case"),
yaxis = list(title = "Number of Cases"),
title = "Evolution of Confirmed Cases after the first Confirmed Case")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
layout(xaxis = list(title = "Number of Days after first Confirmated Case"),
yaxis = list(title = "Number of Cases"),
title = "Evolution of Confirmed Cases after the first Confirmed Case")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
layout(xaxis = list(title = "Number of Days after first Confirmated Case"),
yaxis = list(title = "Number of Cases"),
title = "Evolution of Confirmed Cases after the first Confirmed Case")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
layout(xaxis = list(title = "Date"),
yaxis = list(title = "Number of Active Cases"),
title = "Evolution of Number of Active Cases of People with Covid-19")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total"))
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
add_trace(x=~Date, y=~Australia, name = "Australia", type="scatter", mode="lines", line = list(color = 'rgb(255,205,0)', width = 4)) %>%
layout(xaxis = list(title = "Date"),
yaxis = list(title = "Number of Active Cases"),
title = "Evolution of Number of Active Cases of People with Covid-19")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(22, 96, 167)', width = 4)) %>%
add_trace(x=~Date, y=~Australia, name = "Australia", type="scatter", mode="lines", line = list(color = 'rgb(255,205,0)', width = 4)) %>%
add_trace(x=~Date, y=~`North America`, name = "North America", type="scatter", mode="lines", line = list(color = 'rgb(60,59,110)', width = 4))
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(0, 51, 153)', width = 4)) %>%
add_trace(x=~Date, y=~Australia, name = "Australia", type="scatter", mode="lines", line = list(color = 'rgb(255,205,0)', width = 4)) %>%
add_trace(x=~Date, y=~`North America`, name = "North America", type="scatter", mode="lines", line = list(color = 'rgb(60,59,110)', width = 4))
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(0, 51, 153)', width = 4)) %>%
add_trace(x=~Date, y=~Australia, name = "Australia", type="scatter", mode="lines", line = list(color = 'rgb(255,205,0)', width = 4)) %>%
add_trace(x=~Date, y=~`North America`, name = "North America", type="scatter", mode="lines", line = list(color = 'rgb(60,59,110)', width = 4)) %>%
add_trace(x=~Date, y=~`South America`, name = "South America", type="scatter", mode="lines", line = list(color = 'rgb(0,156,59)', width = 4)) %>%
layout(xaxis = list(title = "Date"),
yaxis = list(title = "Number of Active Cases"),
title = "Evolution of Number of Active Cases of People with Covid-19")
active %>%
filter(!is.na(Continent)) %>%
group_by(Date, Continent) %>%
summarise(active_total = sum(Active), active_day = sum(Active_day)) %>%
ungroup() %>%
reshape2::dcast(Date ~ Continent, value.var = c("active_total")) %>%
plot_ly() %>%
add_trace(x=~Date, y=~Asia, name = "Asia", type="scatter", mode="lines", line = list(color = 'rgb(222, 41, 16)', width = 4)) %>%
add_trace(x=~Date, y=~Europe, name = "Europe", type="scatter", mode="lines", line = list(color = 'rgb(0, 51, 153)', width = 4)) %>%
add_trace(x=~Date, y=~Australia, name = "Australia", type="scatter", mode="lines", line = list(color = 'rgb(255,205,0)', width = 4)) %>%
add_trace(x=~Date, y=~`North America`, name = "North America", type="scatter", mode="lines", line = list(color = 'rgb(60,59,110)', width = 4)) %>%
add_trace(x=~Date, y=~`South America`, name = "South America", type="scatter", mode="lines", line = list(color = 'rgb(0,156,59)', width = 4)) %>%
add_trace(x=~Date, y=~Africa, name = "Africa", type="scatter", mode="lines", line = list(color = 'rgb(0,0,0)', width = 4)) %>%
layout(xaxis = list(title = "Date"),
yaxis = list(title = "Number of Active Cases"),
title = "Evolution of Number of Active Cases of People with Covid-19")
fread("C:/Users/antonio.silva/Downloads/2020.csv.gz")
data.table::fread("C:/Users/antonio.silva/Downloads/2020.csv.gz")
install.packages('R.utils')
data.table::fread("C:/Users/antonio.silva/Downloads/2020.csv.gz")
what <- data.table::fread("C:/Users/antonio.silva/Downloads/2020.csv.gz")
View(what)
what <- read_csv("C:/Users/antonio.silva/Downloads/2020.csv.gz")
View(what)
file.edit('data')
file.edit('data/load.r')
temperature_max <- read_csv('https://github.com/imantsm/COVID-19/blob/master/csv/tMax.csv')
View(temperature_max)
temperature_max <- read_csv('https://githubusercontent.com/imantsm/COVID-19/blob/master/csv/tMax.csv'
https://github.com/imantsm/COVID-19/blob/master/csv/tMax.csv)
https://github.com/imantsm/COVID-19/blob/master/csv/tMax.csv)
temperature_max <- read_csv('https://githubusercontent.com/imantsm/COVID-19/blob/master/csv/tMax.csv')
temperature_max <- read_csv('https://raw.githubusercontent.com/imantsm/COVID-19/blob/master/csv/tMax.csv')
temperature_max <- read_csv('https://raw.githubusercontent.com/imantsm/COVID-19/master/csv/tMax.csv')
View(temperature_max)
temperature_min <- read_csv('https://raw.githubusercontent.com/imantsm/COVID-19/master/csv/tMin.csv')
View(temperature_min)
Country <- c("China (Provinces)")
Date <- c(as.Date(2020-01-24))
Type <- c('Lockdown')
Country <- c("China (Provinces)")
Date <- c(as.Date("2020-01-24"))
Type <- c('Lockdown')
df <- data.frame(Country,Date,Type)
View(df)
df <- data.frame(Country,Date,Type) %>%
tibble::add_row(Country = "Argentina", Date = as.Date("2020-03-19"), Type = "Lockdown") %>%
tibble::add_row(Country = "Austria", Date = as.Date("2020-03-16"), Type = "Lockdown") %>%
tibble::add_row(Country = "Belgium", Date = as.Date("2020-03-18"), Tyep = "Lockdown") %>%
tibble::add_row(Country = "Czech Republic", Date = as.Date("2020-03-16"), Type = "Lockdown") %>%
tibble::add_row(Country = "France", Date = as.Date("2020-03-17"), Type = "Lockdown") %>%
tibble::add_row(Country = "Italy", Date = as.Date("2020-03-09"), Type = "Lockdown") %>%
tibble::add_row(Country = "Malaysia", Date = as.Date("2020-03-18"), Type = "Lockdown") %>%
tibble::add_row(Country = "Morocco", Date = as.Date("2020-03-19"), Type = "Lockdown") %>%
tibble::add_row(Country = "Spain", Date = as.Date("2020-03-14"), Type = "Lockdown") %>%
tibble::add_row(Country = "United Kingdom", Date = as.Date("2020-03-20"), Type = "Lockdown") %>%
tibble::add_row(Country = "Venezuela", Date = as.Date("2020-03-17"), Type = "Lockdown") %>%
tibble::add_row(Country = "Portugal", Date = as.Date("2020-03-19"), Type = "Emergency State")
df <- data.frame(Country,Date,Type) %>%
tibble::add_row(Country = "Argentina", Date = as.Date("2020-03-19"), Type = "Lockdown") %>%
tibble::add_row(Country = "Austria", Date = as.Date("2020-03-16"), Type = "Lockdown") %>%
tibble::add_row(Country = "Belgium", Date = as.Date("2020-03-18"), Type = "Lockdown") %>%
tibble::add_row(Country = "Czech Republic", Date = as.Date("2020-03-16"), Type = "Lockdown") %>%
tibble::add_row(Country = "France", Date = as.Date("2020-03-17"), Type = "Lockdown") %>%
tibble::add_row(Country = "Italy", Date = as.Date("2020-03-09"), Type = "Lockdown") %>%
tibble::add_row(Country = "Malaysia", Date = as.Date("2020-03-18"), Type = "Lockdown") %>%
tibble::add_row(Country = "Morocco", Date = as.Date("2020-03-19"), Type = "Lockdown") %>%
tibble::add_row(Country = "Spain", Date = as.Date("2020-03-14"), Type = "Lockdown") %>%
tibble::add_row(Country = "United Kingdom", Date = as.Date("2020-03-20"), Type = "Lockdown") %>%
tibble::add_row(Country = "Venezuela", Date = as.Date("2020-03-17"), Type = "Lockdown") %>%
tibble::add_row(Country = "Portugal", Date = as.Date("2020-03-19"), Type = "Emergency State")
write_csv("Data/Important_Dates.csv")
write_csv(df, "Data/Important_Dates.csv")
ff <- read_csv("Data/Important_Dates.csv")
View(ff)
file.edit('munge/data_treatment.')
file.edit('munge/data_treatment.r')
temperature_max < temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(recovered), names_to = "Date", values_to = "TempMax")
temperature_max
temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax")
temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date)) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
)
temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
)
temperature_max < temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
) %>%
select(Continent, State, Country, Lat, Long, Date, TempMax) %>%
arrange(Continent, State, Country, Date) %>%
ungroup() %>%
data.frame()
temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax")
temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
) %>%
select(Continent, State, Country, Lat, Long, Date, TempMax)
temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
) %>%
select(Continent, State, Country, Lat, Long, Date, TempMax) %>%
arrange(Continent, State, Country, Date) %>%
data.frame()
temperature_max < temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
) %>%
select(Continent, State, Country, Lat, Long, Date, TempMax) %>%
arrange(Continent, State, Country, Date) %>%
data.frame()
temperature_max <-  temperature_max %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_max), names_to = "Date", values_to = "TempMax") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
) %>%
select(Continent, State, Country, Lat, Long, Date, TempMax) %>%
arrange(Continent, State, Country, Date) %>%
data.frame()
View(temperature_max)
temperature_min <- temperature_min %>%
## convert the dataset from wide to long
pivot_longer(., cols = 5:ncol(temperature_min), names_to = "Date", values_to = "TempMin") %>%
## Convert the date column to a date format
mutate(Date = mdy(Date),
Continent = coords2continent(data.frame(lon=c(Long), lat=c(Lat)))) %>%
rename(
State = `Province/State`,
Country = `Country/Region`
) %>%
select(Continent, State, Country, Lat, Long, Date, TempMin) %>%
arrange(Continent, State, Country, Date) %>%
data.frame()
confirmed %>%
group_by(Country) %>%
summarise(all_cases = sum(Confirmed_day))
teste <- confirmed %>%
group_by(Country) %>%
summarise(all_cases = sum(Confirmed_day))
View(teste)
teste <- confirmed %>%
group_by(Country) %>%
summarise(all_cases = sum(Confirmed_day)) %>%
arrange(all_cases)
View(teste)
teste <- confirmed %>%
group_by(Country) %>%
summarise(all_cases = sum(Confirmed_day)) %>%
arrange(desc(all_cases))
View(teste)
teste <- confirmed %>%
group_by(Country) %>%
summarise(all_cases = sum(Confirmed_day)) %>%
arrange(desc(all_cases)) %>%
filter(row_number()<=30)
View(teste)
temperature_max %>%
filter(Country %in% teste$Country)
temperature_max %>%
filter(Country %in% teste$Country) %>%
mutate(week = floor_date(Date, unit="week")) %>%
group_by(Country, Date) %>%
summarise(temp_max = mean(TempMax))
dd <- temperature_max %>%
filter(Country %in% teste$Country) %>%
mutate(week = floor_date(Date, unit="week")) %>%
group_by(Country, Date) %>%
summarise(temp_max = mean(TempMax))
View(dd)
dd <- temperature_max %>%
filter(Country %in% teste$Country) %>%
group_by(Country, Date) %>%
summarise(temp_max = mean(TempMax)) %>%
ungroup() %>%
mutate(week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
mutate(mean_temp = mean(temp_max))
dd <- temperature_max %>%
filter(Country %in% teste$Country) %>%
group_by(Country, Date) %>%
summarise(temp_max = mean(TempMax)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
mutate(mean_temp = mean(temp_max))
View(dd)
dd <- temperature_max %>%
filter(Country %in% teste$Country) %>%
group_by(Country, Date) %>%
summarise(temp_max = mean(TempMax)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(mean_temp = mean(temp_max))
View(dd)
top30 <- confirmed %>%
group_by(Country) %>%
summarise(all_cases = sum(Confirmed_day)) %>%
arrange(desc(all_cases)) %>%
filter(row_number()<=30)
mean_temperature <- temperature_max %>%
filter(Country %in% top30$Country) %>%
group_by(Country, Date) %>%
summarise(temp_max = mean(TempMax)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(mean_temp = mean(temp_max))
confirmed %>%
filter(Country %in% top30$Country) %>%
group_by(Country, Date) %>%
summarise(Confirmed_cases = sum(Confirmed_day)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(cases = sum(Confirmed_cases)) %>%
ungroup() %>%
group_by(Country) %>%
arrange(Week)
weekly_evolution <- confirmed %>%
filter(Country %in% top30$Country) %>%
group_by(Country, Date) %>%
summarise(Confirmed_cases = sum(Confirmed_day)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(cases = sum(Confirmed_cases)) %>%
ungroup() %>%
group_by(Country) %>%
arrange(Week) %>%
mutate(evolution = (cases-lag(cases, default = 0))/lag(cases, default = 0))
View(weekly_evolution)
weekly_evolution <- confirmed %>%
filter(Country %in% top30$Country) %>%
group_by(Country, Date) %>%
summarise(Confirmed_cases = sum(Confirmed_day)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(cases = sum(Confirmed_cases)) %>%
ungroup() %>%
group_by(Country) %>%
arrange(Week) %>%
mutate(evolution = (cases-lag(cases, default = 0))/lag(cases, default = 0)) %>%
filter(!is.(NaN),
!is.(Inf),
evolution < 0)
weekly_evolution <- confirmed %>%
filter(Country %in% top30$Country) %>%
group_by(Country, Date) %>%
summarise(Confirmed_cases = sum(Confirmed_day)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(cases = sum(Confirmed_cases)) %>%
ungroup() %>%
group_by(Country) %>%
arrange(Week) %>%
mutate(evolution = (cases-lag(cases, default = 0))/lag(cases, default = 0)) %>%
filter(!is.nan(evolution),
!is.infinite(evolution),
evolution < 0)
View(weekly_evolution)
weekly_evolution <- confirmed %>%
filter(Country %in% top30$Country) %>%
group_by(Country, Date) %>%
summarise(Confirmed_cases = sum(Confirmed_day)) %>%
ungroup() %>%
mutate(Week = floor_date(Date, unit="week")) %>%
group_by(Country, Week) %>%
summarise(cases = sum(Confirmed_cases)) %>%
ungroup() %>%
group_by(Country) %>%
arrange(Week) %>%
mutate(evolution = (cases-lag(cases, default = 0))/lag(cases, default = 0)) %>%
filter(!is.nan(evolution),
!is.infinite(evolution),
evolution > 0)
View(weekly_evolution)
weekly_evolution %>%
left_join(mean_temperature, by=c("Date"="Date","Country"="Country"))
mean_temperature
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country"))
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Country)
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Country, colors = colors = c("#132B43", "#56B1F7"), mode = "marker")
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Country, colors = c("#132B43", "#56B1F7"), mode = "marker")
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Country, colors = c("#132B43", "#56B1F7"), mode = "markers")
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
left_join(confirmed[,c("Country", "Continent")], by = c("Country"="Country"))
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
left_join(confirmed[,c("Country", "Continent")], by = c("Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Continent, colors = c("#132B43", "#56B1F7"), mode = "markers")
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
left_join(confirmed[,c("Country", "Continent")], by = c("Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Continent, mode = "markers")
weekly_evolution %>%
left_join(mean_temperature, by=c("Week"="Week","Country"="Country")) %>%
left_join(confirmed[,c("Country", "Continent")], by = c("Country"="Country")) %>%
plot_ly(x=~mean_temp, y=~evolution, color=~Continent)
